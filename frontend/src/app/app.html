<div class="container">
    <div class="button-container">
        <button (click)="onShowUsers()" class="btn btn-green">Show Users</button>
        <button (click)="onNewUser()" class="btn btn-new">NEW</button>
    </div>

    @if (showUsersTable) {
        <div class="table-container">
            <h2>Users List</h2>
            <table>
                <thead>
                    <tr>
                        <th>First Name</th>
                        <th>Last Name</th>
                        <th>Date of Birth</th>
                        <th>Username</th>
                    </tr>
                </thead>
                <tbody>
                    @if (isLoading) {
                        <tr>
                            <td colspan="4" style="text-align: center;">Loading users...</td>
                        </tr>
                    } @else if (users.length === 0) {
                        <tr>
                            <td colspan="4" style="text-align: center;">No users found</td>
                        </tr>
                    } @else {
                        @for (user of users; track $index) {
                            <tr>
                                <td>{{ user.firstName || '' }}</td>
                                <td>{{ user.lastName || '' }}</td>
                                <td>{{ user.dateOfBirth || '' }}</td>
                                <td>{{ user.username || '' }}</td>
                            </tr>
                        }
                    }
                </tbody>
            </table>
        </div>
    }

    @if (showModal) {
        <div class="modal-overlay" (click)="onModalOverlayClick($event)">
            <div class="modal-content">
                <div class="modal-header">
                    <h2>Create New User</h2>
                    <button class="close-btn" (click)="closeModal()">&times;</button>
                </div>
                <form [formGroup]="userForm" (ngSubmit)="onSubmit()">
                    <div class="form-group">
                        <label for="firstName">First Name:</label>
                        <input 
                            type="text" 
                            id="firstName" 
                            formControlName="firstName">
                    </div>
                    <div class="form-group">
                        <label for="lastName">Last Name:</label>
                        <input 
                            type="text" 
                            id="lastName" 
                            formControlName="lastName">
                    </div>
                    <div class="form-group">
                        <label for="dateOfBirth">Date of Birth:</label>
                        <input 
                            type="date" 
                            id="dateOfBirth" 
                            formControlName="dateOfBirth">
                    </div>
                    <div class="form-group">
                        <label for="username">Username:</label>
                        <input 
                            type="text" 
                            id="username" 
                            formControlName="username">
                    </div>
                    <div class="form-group">
                        <label for="password">Password:</label>
                        <input 
                            type="password" 
                            id="password" 
                            formControlName="password">
                    </div>
                    <div class="form-buttons">
                        <button type="submit" class="btn btn-save">Save</button>
                        <button type="button" class="btn btn-cancel" (click)="closeModal()">Cancel</button>
                    </div>
                </form>
            </div>
        </div>
    }
</div>
